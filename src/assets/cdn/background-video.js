if(!customElements.get("background-video")){class BackgroundVideo extends HTMLElement{constructor(){super(),this.tl=!1,this.splittext=!1,this.paused=!1,this.toggle=this.querySelector(".background-video__controls button")}connectedCallback(){let _this=this;document.body.classList.contains("animations-true")&&typeof gsap<"u"&&this.prepareAnimations(),this.video_container=this.querySelector(".background-video__iframe"),this.video_container.querySelector("iframe")&&(this.video_container.querySelector("iframe").onload=function(){_this.videoPlay()}),this.toggle&&this.toggle.addEventListener("click",this.setupControlEvents.bind(this))}disconnectedCallback(){document.body.classList.contains("animations-true")&&typeof gsap<"u"&&(this.tl.kill(),this.splittext.revert())}setupControlEvents(){this.paused?(this.videoPlay(),this.toggle&&this.toggle.classList.remove("paused")):(this.videoPause(),this.toggle&&this.toggle.classList.add("paused"))}videoPlay(){setTimeout(()=>{this.video_container.dataset.provider==="youtube"?this.video_container.querySelector("iframe").contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*"):this.video_container.dataset.provider==="vimeo"?this.video_container.querySelector("iframe").contentWindow.postMessage(JSON.stringify({method:"play"}),"*"):this.video_container.dataset.provider==="hosted"&&this.video_container.querySelector("video").play(),this.paused=!1},10)}videoPause(){setTimeout(()=>{this.video_container.dataset.provider==="youtube"?this.video_container.querySelector("iframe").contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*"):this.video_container.dataset.provider==="vimeo"?this.video_container.querySelector("iframe").contentWindow.postMessage(JSON.stringify({method:"pause"}),"*"):this.video_container.dataset.provider==="hosted"&&this.video_container.querySelector("video").pause(),this.paused=!0},10)}prepareAnimations(){let section=this,button_offset=0;section.tl=gsap.timeline({scrollTrigger:{trigger:section,start:"top center"}}),document.fonts.ready.then(function(){if(section.splittext=new SplitText(section.querySelectorAll("h3, p:not(.subheading)"),{type:"lines",linesClass:"line-child"}),section.mask=new SplitText(section.querySelectorAll("h3, p:not(.subheading)"),{type:"lines",linesClass:"line-parent"}),section.querySelector(".subheading")&&(section.tl.fromTo(section.querySelector(".subheading"),{opacity:0},{duration:.75,opacity:.6},0),button_offset+=.5),section.querySelector("h3")){let h3_duration=.7+(section.querySelectorAll("h3 .line-child").length-1)*.05;section.tl.from(section.querySelectorAll("h3 .line-child"),{duration:h3_duration,yPercent:120,stagger:.05,rotation:"3deg"},0),button_offset+=h3_duration}if(section.querySelector(".rte p")){let p_duration=.7+(section.querySelectorAll("p .line-child").length-1)*.02;section.tl.set(section.querySelectorAll(".rte p"),{visibility:"visible"},0).from(section.querySelectorAll(".rte p .line-child"),{duration:p_duration,yPercent:120,stagger:.02,rotation:"3deg"},0),button_offset+=p_duration}section.querySelector(".video-lightbox-modal__button")&&section.tl.fromTo(section.querySelector(".video-lightbox-modal__button"),{autoAlpha:0},{duration:.5,autoAlpha:1},button_offset*.4)})}}customElements.define("background-video",BackgroundVideo)}
//# sourceMappingURL=/cdn/shop/t/19/assets/background-video.js.map
